<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fongzhizhi.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":"ture","mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="TypeScript是JavaScript的超集。  我们知道Javascript是弱类型语言，而Typescript的出现就是为了解决js类型系统的不足，由于ts始于js，归于js的特点，从js过渡到ts是很容易的，且ts的类型系统提高了js代码的质量，我们有必要学习这门优秀的语言。 本文从js类型系统的问题出发，阐述ts构建的缘由和优势，Folw静态类型检测方案，以及ts基本的使用规则。">
<meta property="og:type" content="article">
<meta property="og:title" content="TypeScript使用大全">
<meta property="og:url" content="https://fongzhizhi.github.io/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/index.html">
<meta property="og:site_name" content="风之之的Blog">
<meta property="og:description" content="TypeScript是JavaScript的超集。  我们知道Javascript是弱类型语言，而Typescript的出现就是为了解决js类型系统的不足，由于ts始于js，归于js的特点，从js过渡到ts是很容易的，且ts的类型系统提高了js代码的质量，我们有必要学习这门优秀的语言。 本文从js类型系统的问题出发，阐述ts构建的缘由和优势，Folw静态类型检测方案，以及ts基本的使用规则。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fongzhizhi.github.io/images/ts.png">
<meta property="og:image" content="https://fongzhizhi.github.io/images/image-20200922011455480.png">
<meta property="og:image" content="https://fongzhizhi.github.io/images/image-20200922225644958.png">
<meta property="article:published_time" content="2020-09-22T17:23:40.538Z">
<meta property="article:modified_time" content="2020-09-22T17:29:47.655Z">
<meta property="article:author" content="Dongoog">
<meta property="article:tag" content="TypeScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fongzhizhi.github.io/images/ts.png">

<link rel="canonical" href="https://fongzhizhi.github.io/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>TypeScript使用大全 | 风之之的Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="风之之的Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">风之之的Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">好想在哪见过你~</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fongzhizhi.github.io/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar1.gif">
      <meta itemprop="name" content="Dongoog">
      <meta itemprop="description" content="这个人很懒，什么也没说.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风之之的Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          TypeScript使用大全
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-23 01:23:40 / 修改时间：01:29:47" itemprop="dateCreated datePublished" datetime="2020-09-23T01:23:40+08:00">2020-09-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TypeScript/" itemprop="url" rel="index"><span itemprop="name">TypeScript</span></a>
                </span>
            </span>

          
            <span id="/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" class="post-meta-item leancloud_visitors" data-flag-title="TypeScript使用大全" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>8.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p><code>TypeScript</code>是<code>JavaScript</code>的超集。</p>
</blockquote>
<p>我们知道<code>Javascript</code>是弱类型语言，而<code>Typescript</code>的出现就是为了解决js类型系统的不足，由于<strong>ts始于js，归于js</strong>的特点，从js过渡到ts是很容易的，且ts的类型系统提高了js代码的质量，我们有必要学习这门优秀的语言。</p>
<p>本文从js<strong>类型系统</strong>的问题出发，阐述ts构建的缘由和优势，<code>Folw</code>静态类型检测方案，以及<code>ts</code>基本的使用规则。</p>
<p><img data-src="/images/ts.png"></p>
<a id="more"></a>

<h2 id="强类型和弱类型"><a href="#强类型和弱类型" class="headerlink" title="强类型和弱类型"></a>强类型和弱类型</h2><blockquote>
<p><strong>强弱类型</strong>（Strong and weak typing）表示在<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8">计算机科学</a>以及<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88">程序设计</a>中，经常把<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80">编程语言</a>的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F">类型系统</a>分为<strong>强类型</strong>（英语：strongly typed）和<strong>弱类型</strong>（英语：weakly typed (loosely typed)）两种。这两个术语并<strong>没有非常明确的定义</strong>，但主要用以描述<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80">编程语言</a>对于混入不同<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99%E5%9E%8B%E5%88%A5">资料类型</a>的值进行运算时的处理方式。强类型的语言遇到<strong>函数引数类型和实际调用类型不符合</strong>的情况经常会直接出错或者编译失败；而弱类型的语言常常会<strong>实行隐式转换</strong>，或者产生难以意料的结果。</p>
</blockquote>
<p>强类型语言和弱类型语言没有明确的定义划分，但有一个很明显的特点就是强类型语言在变量调用时和当前的变量类型一致，而弱类型语言可以传入不一致的类型，并在调用时会<strong>自动隐式转换</strong>。比如<code>js</code>的求和函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>理论上，我们需要的参数<code>a</code>和<code>b</code>都应该是数字类型，否则就会发生难以预期的错误结果，在强类型语言比如<code>python</code>中，如果我们传入字符串，就会报类型错误，但是在弱类型语言<code>js</code>中可以正常执行。</p>
<p><code>javaScript</code>早期作为简单易用的脚本语言，是不需要编译环节而直接运行的，且代码量比较小，弱类型的特点成了<code>js</code>简单易用的优势。但随着js项目的复杂度越来越高，功能越来越多，弱类型语言带来的”不靠谱“特点就变成了<code>javascript</code>的劣势。也很容易在大型项目中出现常见的错误：</p>
<ul>
<li>类型不确定导致语法上的使用错误，需要在执行时才能发现。</li>
<li>有些错误执行时也不报错，会造成运行结果的不确定性，造成维护困难。</li>
<li>代码周期长，联系多，如果有重构需要，不敢轻易改动数据类型，需要大量测试，维护效率低。</li>
</ul>
<p>而弱类型劣势反之就是<strong>强类型的优势</strong>：</p>
<ul>
<li>错误更早暴露：执行前就能发现语法和调用上的错误</li>
<li>智能的代码提示：有了类型约束，智能提示就能更准确地提示，进而提高开发效率。</li>
<li>重构更牢靠：直接修改不恰当的数据类型就可以直接看到代码的错误提示，重构效率更高。</li>
<li>介绍不必要的类型判断：弱语言常常需要增加一些类型判断来控制不可靠的输出，而强类型就很少再需要这样的判断。</li>
</ul>
<h2 id="静态类型和动态类型"><a href="#静态类型和动态类型" class="headerlink" title="静态类型和动态类型"></a>静态类型和动态类型</h2><p>在类型检测层面，常常又把语言分为静态类型语言和动态类型语言，静态类型语言就是变量在申明时就需要指定变量的类型，且不可再变更类型，而动态类型则是可变更变量类型的语言。</p>
<p>比如在<code>js</code>中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;this is a message.&#x27;</span></span><br><span class="line">str = <span class="number">11</span></span><br></pre></td></tr></table></figure>

<p>这样直接把<code>string</code>类型变更为<code>number</code>类型是允许的，这就是动态类型语言，而在<code>java</code>中这样的赋值操作在编译时就会报错，这就是静态类型。</p>
<p>常见的语言类型划分如下：</p>
<p><img data-src="/images/image-20200922011455480.png"></p>
<h2 id="Flow类型检查器概述和使用"><a href="#Flow类型检查器概述和使用" class="headerlink" title="Flow类型检查器概述和使用"></a>Flow类型检查器概述和使用</h2><blockquote>
<p><code>Flow</code>是<code>javascript</code>的静态类型检查工具，能在编写js代码的同时进行<strong>类型推</strong>断和<strong>实时反馈</strong>。点击这里参考<a target="_blank" rel="noopener" href="https://flow.org/">官方说明</a>。</p>
</blockquote>
<p><code>js</code>是脚本语言，没有编译环节，而且是弱类型语言，<code>Flow</code>工具就是为了完善<code>js</code>的类型系统而产生的类型检测工具，我们只需要在编写js代码时标注变量类型（即<strong>类型注解</strong>），就可以使用<code>flow</code>实时检测错误调用，让js也拥有<code>强类型</code>语言的特点。</p>
<h3 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h3><p>首先需要在项目环境安装<code>flow</code>包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add flow-bin --dev</span><br></pre></td></tr></table></figure>

<p>如果项目根目录没有<code>.flowconfig</code>文件，还需要初始化一下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn flow init</span><br></pre></td></tr></table></figure>

<p>接下来，我们就可以使用类型注解的方式进行开发了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @flow</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a: number, b:number</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">sum(<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在变量名后使用<code>:类型</code>的方式就是类型注解。</p>
</blockquote>
<p>首先js是不支持类型注解的，所以上面的js代码还没运行可能编辑器就会提示错误，我们需要手动关掉编辑器的js检测，比如<code>vscode</code>可以在设置中搜索“javascript validate”，取消勾选即可。</p>
<p>在运行检测时，我们还需要手动在需要检测的文件开始行添加<code>@flow</code>的注释语句，然后开启检测：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn run flow</span><br></pre></td></tr></table></figure>

<p>然后就能在控制台看到对应的报错信息。</p>
<h3 id="移除注解"><a href="#移除注解" class="headerlink" title="移除注解"></a>移除注解</h3><p>现在的<code>js</code>代码是有类型注解的，因此直接运行会语法报错，需要使用<code>flow</code>提供的<code>flow-remove-types</code>模块进行移除，先安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add flow-remove-types --dev</span><br></pre></td></tr></table></figure>

<p>然后执行移除命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn flow-remove-types src -d dist</span><br></pre></td></tr></table></figure>

<blockquote>
<p>将<code>src</code>目录下的文件编译到<code>dist</code>目录下。</p>
</blockquote>
<h3 id="配合babel使用"><a href="#配合babel使用" class="headerlink" title="配合babel使用"></a>配合babel使用</h3><p>很多时候我们都会安装别的编译工具，比如<code>babel</code>，这样，我们<code>babel</code>中的flow插件，首先我们安装<code>babel</code>工具和<code>flow</code>插件<code>preset-flow</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/core @babel/cli @babel/preset-flow --dev</span><br></pre></td></tr></table></figure>

<p>然后我们需要创建<code>babel</code>的配置文件<code>.babelrc</code>：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [&quot;@babel/preset-flow&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后使用命令就能编译出移除类型注解的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn babel src -d dist</span><br></pre></td></tr></table></figure>

<h3 id="使用编译器插件"><a href="#使用编译器插件" class="headerlink" title="使用编译器插件"></a>使用编译器插件</h3><p>使用<code>flow</code>模块需要我们每次都手动执行<code>yarn run flow</code>命令，且在控制台输出信息的方式并不直观，开发体验很差，所以我们更多的方式是使用编辑器配套的<code>flow</code>插件，<code>flow</code>在不同的编辑器都提供了自己的插件，比如<code>vscode</code>上，我们搜索<code>flow</code>：安装一个名叫：<code>Flow Language Support</code>的插件即可。</p>
<p>这样，我们不用手动执行检测命令，也能看到智能的错误标识：</p>
<p><img data-src="/images/image-20200922225644958.png"></p>
<h3 id="类型注解的使用"><a href="#类型注解的使用" class="headerlink" title="类型注解的使用"></a>类型注解的使用</h3><p>类型注解的使用和后面要讲到的<code>typescript</code>基本一致，感兴趣的可以参考官网的<a target="_blank" rel="noopener" href="https://flow.org/en/docs/lang/">说明文档</a>。</p>
<h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>我们一般把<code>typescript</code>称为<code>javascript</code>的超集，其实<code>es</code>相当于<code>js</code>的所有语法 + 类型系统 + <code>es6+</code>的新语法，而且<code>ts</code>最终也是编译为<code>js</code>来运行，使用<code>ts</code>来开发，你能体验到<code>js</code>没有的类型系统智能检测，以及体验<code>ecmascript</code>的一些新语法，基本是能实现完全平滑的过渡。</p>
<p><code>typescript</code>的学习成本是很低的，你甚至可以完完全全使用<code>js</code>的写法来编写<code>ts</code>，使用<code>ts</code>你可以当成你在使用<code>js</code> + <code>flow</code>进行开发，而<code>ts</code>其实会有更好的体验，没理由不接受<code>ts</code>。</p>
<h3 id="快速上手-1"><a href="#快速上手-1" class="headerlink" title="快速上手"></a>快速上手</h3><p>由于<code>ts</code>本身就是<code>js</code>语法的超集，我们只需要把我们的<code>.js</code>文件改为<code>.ts</code>文件就能正常运作：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">sum(<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>这段代其实就是上面配合<code>flow</code>时的语法，而我们现在不需要启动<code>flow</code>，<code>vscode</code>就能正确给出智能提示。</p>
<p>同样，如果需要正常运行，也是需要编译为<code>js</code>文件，我们安装<code>ts</code>提供的模块<code>typescript</code>:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add typescript --dev</span><br></pre></td></tr></table></figure>

<p>这个模块提供了<code>tsc</code>的命令(typescript compiler缩写)，就可以把我们编写的<code>ts</code>文件编译为<code>js</code>文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn tsc filename.ts</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果编译的ts文件有类型错误，编译会失败并在控制台打印出对应的错误。</p>
</blockquote>
<h3 id="编译器配置文件"><a href="#编译器配置文件" class="headerlink" title="编译器配置文件"></a>编译器配置文件</h3><p><code>tsc</code>除了编译单个文件，其实还支持使用配置文件来修改编译配置，我们使用命令初始化并创建这个文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn tsc --init</span><br></pre></td></tr></table></figure>

<p>然后就会在目录下创建一个名为<code>tsconfig.json</code>的配置文件。我们就可以指定编译目录，输出目录以及编译的js版本等待，有了配置文件，运行<code>yarn tsc</code>即可安装配置文件进行编译。</p>
<p>更多配置说明可以参考<a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/handbook/tsconfig-json.html">配置文件- 官方文档</a>。</p>
<h3 id="原始数据类型"><a href="#原始数据类型" class="headerlink" title="原始数据类型"></a>原始数据类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: <span class="built_in">string</span> = <span class="string">&#x27;jinx&#x27;</span>;</span><br><span class="line"><span class="comment">// a = null</span></span><br><span class="line"><span class="comment">// a = undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b: <span class="built_in">number</span> = <span class="number">100</span>;</span><br><span class="line">b = <span class="literal">NaN</span></span><br><span class="line">b = <span class="literal">Infinity</span></span><br><span class="line"><span class="comment">// b = undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// c = null</span></span><br><span class="line"><span class="comment">// c = undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d: <span class="built_in">void</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="comment">// d = null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s: symbol = <span class="built_in">Symbol</span>()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要注意的是，如果配置文件开启了<code>strict</code>严格模式，以上注释的代码都是不能使用的。此外，如果<code>symbol</code>类型报错，可能是配置文件的<code>lib</code>标准库没有包含支持<code>symbol</code>的库，我们就可以添加leix<code>es2015</code>这样的库。</p>
</blockquote>
<h3 id="显示中文的错误提示"><a href="#显示中文的错误提示" class="headerlink" title="显示中文的错误提示"></a>显示中文的错误提示</h3><p>如果希望类型提示时显示为中文，可以运行下面的命令进行语言切换。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn tsc --local zh-CN</span><br></pre></td></tr></table></figure>

<p>或者有的编辑器也支持语言的修改，比如<code>vscode</code>中可以搜索”typescript locale”来切换语言。</p>
<p>但其实不建议这样做，当我们遇到不能理解的错误时可以更好地使用搜索引擎准确地找到错误描述。</p>
<h3 id="作用域问题"><a href="#作用域问题" class="headerlink" title="作用域问题"></a>作用域问题</h3><p>当我们在两个文件中声明了同名的变量，就会提示我们变量”XXX”重复声明的问题：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot redeclare block-scoped variable &#x27;XXX&#x27;.</span><br></pre></td></tr></table></figure>

<p>这是因为，这两个文件目前下的变量都是全局作用域的，而我们一般会把一个<code>ts</code>文件当做一个模块来使用，所以我们只需要在文件中使用<code>export</code>关键字进行<strong>标识</strong>即可：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a: <span class="built_in">string</span> = <span class="string">&#x27;jinx&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实际上，一个ts文件可以使用多个<code>export</code>关键字，也可以使用<code>export default</code>来导出一个对象。</p>
</blockquote>
<h3 id="object类型"><a href="#object类型" class="headerlink" title="object类型"></a>object类型</h3><blockquote>
<p><code>object</code>表示非原始类型，也就是除<code>number</code>，<code>string</code>，<code>boolean</code>，<code>symbol</code>，<code>null</code>或<code>undefined</code>之外的类型。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">o: object | null</span>): <span class="title">void</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params">&#123; prop: <span class="number">0</span> &#125;</span>); // <span class="title">OK</span></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params">null</span>); // <span class="title">OK</span></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span>); // <span class="title">OK</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params"><span class="number">42</span></span>); // <span class="title">Error</span></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params"><span class="string">&quot;string&quot;</span></span>); // <span class="title">Error</span></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params">false</span>); // <span class="title">Error</span></span></span><br><span class="line"><span class="function"><span class="title">create</span>(<span class="params">undefined</span>); // <span class="title">Error</span></span></span><br></pre></td></tr></table></figure>

<p>但是我们<strong>一般不使用</strong>这个类型，我们常常使用更准确的<code>接口</code>来描述对象类型。</p>
<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><p>数组的类型定义，我们一般有两种方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：使用[]标识</span></span><br><span class="line"><span class="keyword">const</span> arr1: number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：使用Array泛型</span></span><br><span class="line"><span class="keyword">const</span> arr2: <span class="built_in">Array</span>&lt;string&gt; = [<span class="string">&#x27;jinx&#x27;</span>, <span class="string">&#x27;yasuo&#x27;</span>, <span class="string">&#x27;jax&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="元祖类型"><a href="#元祖类型" class="headerlink" title="元祖类型"></a>元祖类型</h3><p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为 <code>string</code>和<code>number</code>类型的元组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tuple: [string, number] = [<span class="string">&#x27;jinx&#x27;</span>, <span class="number">23</span>]</span><br><span class="line"><span class="keyword">const</span> [_name, _age] = tuple;</span><br></pre></td></tr></table></figure>

<h3 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h3><p><code>enum</code>类型是对JavaScript标准数据类型的一个补充。 像C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字。一般我们用于定义一些通用的常量，比如红绿灯：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> LightColor &#123;</span><br><span class="line">    RED,</span><br><span class="line">    YELLOW,</span><br><span class="line">    BLUE,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>默认情况下，从<code>0</code>开始为元素编号。 你也可以手动的指定成员的数值。 例如，我们将上面的例子改成从 <code>1</code>开始编号：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> LightColor &#123;</span><br><span class="line">    RED = <span class="number">1</span>,</span><br><span class="line">    YELLOW,</span><br><span class="line">    BLUE,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果使用字符串进行编号，你需要为每个成员进行编号。</p>
</blockquote>
<p>实际上，枚举是会被编译为一种双向绑定的对象，比如上面的枚举对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> LightColor;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">LightColor</span>) </span>&#123;</span><br><span class="line">    LightColor[LightColor[<span class="string">&quot;RED&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;RED&quot;</span>;</span><br><span class="line">    LightColor[LightColor[<span class="string">&quot;YELLOW&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;YELLOW&quot;</span>;</span><br><span class="line">    LightColor[LightColor[<span class="string">&quot;BLUE&quot;</span>] = <span class="number">3</span>] = <span class="string">&quot;BLUE&quot;</span>;</span><br><span class="line">&#125;)(LightColor || (LightColor = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<p>所以我们可以通过编号反向获得枚举的名称：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Color &#123;Red = <span class="number">1</span>, Green, Blue&#125;</span><br><span class="line"><span class="keyword">let</span> colorName: <span class="built_in">string</span> = Color[<span class="number">2</span>]; <span class="comment">// Green</span></span><br></pre></td></tr></table></figure>

<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><h4 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h4><p>和JavaScript一样，TypeScript函数可以创建有名字的函数和匿名函数，函数一般是输入和输出的工具，所以类型声明时也是对输入类型和输出类型最类型注解。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myAdd = <span class="function"><span class="keyword">function</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123; <span class="keyword">return</span> x + y; &#125;;</span><br></pre></td></tr></table></figure>

<h4 id="可选参数和默认参数"><a href="#可选参数和默认参数" class="headerlink" title="可选参数和默认参数"></a>可选参数和默认参数</h4><p>TypeScript里的每个函数参数都是必须的。 这不是指不能传递 <code>null</code>或<code>undefined</code>作为参数，而是说编译器检查用户是否为每个参数都传入了值。 编译器还会假设只有这些参数会被传递进函数。 简短地说，传递给一个函数的参数个数必须与函数期望的参数个数一致。</p>
<p>JavaScript里，每个参数都是可选的，可传可不传。 没传参的时候，它的值就是undefined。 在TypeScript里我们可以在参数名旁使用 <code>?</code>实现可选参数的功能。 比如，我们想让last name是可选的：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName?: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lastName)</span><br><span class="line">        <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = buildName(<span class="string">&quot;Bob&quot;</span>);  <span class="comment">// works correctly now</span></span><br><span class="line"><span class="keyword">let</span> result2 = buildName(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>, <span class="string">&quot;Sr.&quot;</span>);  <span class="comment">// error, too many parameters</span></span><br><span class="line"><span class="keyword">let</span> result3 = buildName(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>);  <span class="comment">// ah, just right</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>可选参数必须跟在必须参数后面。</p>
</blockquote>
<h4 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h4><p>必要参数，默认参数和可选参数有个共同点：它们表示某一个参数。 有时，你想同时操作多个参数，或者你并不知道会有多少参数传递进来。 在JavaScript里，你可以使用 <code>arguments</code>来访问所有传入的参数。</p>
<p>在TypeScript里，你可以把所有参数收集到一个变量里：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, ...restOfName: <span class="built_in">string</span>[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employeeName = buildName(<span class="string">&quot;Joseph&quot;</span>, <span class="string">&quot;Samuel&quot;</span>, <span class="string">&quot;Lucas&quot;</span>, <span class="string">&quot;MacKinzie&quot;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实际上，<code>ES6</code>已经支持这种语法。</p>
</blockquote>
<h3 id="任意类型"><a href="#任意类型" class="headerlink" title="任意类型"></a>任意类型</h3><p>有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。 这些值可能来自于动态的内容，比如来自用户输入或第三方代码库。 这种情况下，我们不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用 <code>any</code>类型来标记这些变量：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> notSure: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">&quot;maybe a string instead&quot;</span>;</span><br><span class="line">notSure = <span class="literal">false</span>; <span class="comment">// okay, definitely a boolean</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用<code>any</code>其实就是跳过了类型检查。</p>
</blockquote>
<h3 id="隐式类型推断"><a href="#隐式类型推断" class="headerlink" title="隐式类型推断"></a>隐式类型推断</h3><p>当我们在声明变量时直接赋值而为做类型声明，ts能自动推断出赋值类型作为当前变量的类型：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">9</span> <span class="comment">// 自动推断为number类型</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>其实并不推荐隐式类型推断，我们应该尽可能手动注解类型。</p>
</blockquote>
<h3 id="类型注解-1"><a href="#类型注解-1" class="headerlink" title="类型注解"></a>类型注解</h3><p>有时候，某个变量可能有多个类型，或者为<code>any</code>类型，但我们明确知道数据来源，就可以使用类型断言，强制声明为某种类型，比如下面的示例：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = nums.find(<span class="function"><span class="params">i</span> =&gt;</span> i &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = res ** <span class="number">2</span>; <span class="comment">// Object is possibly &#x27;undefined&#x27;.</span></span><br></pre></td></tr></table></figure>

<p>在严格模式下，<code>res</code>会被推断为<code>number | undefined</code>类型，但是我们十分明确的知道，nums不可能返回<code>undefined</code>。</p>
<p>这时为了避免报错，我们可以使用<code>as</code>关键字进行类型断言：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> square = (res <span class="keyword">as</span> <span class="built_in">number</span>) ** <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">const</span> square = (&lt;<span class="built_in">number</span>&gt;res) ** <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>&lt;type&gt;</code>也可以作为类型断言的标识，但不推荐使用，因为可能会与项目中使用的<code>JSX</code>等工具冲突。</p>
</blockquote>
<p>值得注意的是，类型断言并不会改变变量的类型，只是在使用时进行强制性地类型标注，以此避开类型检测检测错误。</p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><blockquote>
<p>TypeScript的核心原则之一是对值所具有的<em>结构</em>进行类型检查。 它有时被称做“鸭式辨型法”或“结构性子类型化”。 在TypeScript里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约。</p>
</blockquote>
<p>比如，我们定义了一个自我介绍的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selfIntroduction</span>(<span class="params">p: any</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hello, my name is <span class="subst">$&#123;p.name&#125;</span>, I am <span class="subst">$&#123;p.age&#125;</span> years old.`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际上，我们希望获得的对象<code>p</code>必须包含<code>name</code>和<code>age</code>属性，这就是一种约定，或者是这个函数的规范，我们就可以使用接口来进行类型声明。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selfIntroduction</span>(<span class="params">p: Person</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hello, my name is <span class="subst">$&#123;p.name&#125;</span>, I am <span class="subst">$&#123;p.age&#125;</span> years old.`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口成员我们还可以设置为可选和只读，就像这样：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    <span class="keyword">readonly</span> idnumber: <span class="built_in">string</span>; <span class="comment">// 只读参数</span></span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">    hobbies?: <span class="built_in">string</span>[]; <span class="comment">// 可选参数 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><p>如果你已经使用了<code>ES6</code>的类Class，在<code>ts</code>中的类也是大同小异的。</p>
<p>这里就不在多做赘述，可参考<a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/handbook/classes.html">官方文档</a>。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/release-notes/typescript-3.1.html">docs - typescript</a></li>
</ol>

    </div>

    
    
    
        <div class="reward-container">
  <div>谢谢你请我吃糖!</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Dongoog 微信">
        <p>微信</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Dongoog 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Dongoog
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://fongzhizhi.github.io/2020/09/23/TypeScript%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" title="TypeScript使用大全">https://fongzhizhi.github.io/2020/09/23/TypeScript语言概述/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/TypeScript/" rel="tag"><i class="fa fa-tag"></i> TypeScript</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/20/JavaScript%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" rel="prev" title="JavaScript异步编程">
      <i class="fa fa-chevron-left"></i> JavaScript异步编程
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/27/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="next" title="函数式编程范式">
      函数式编程范式 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%BA%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%B1%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.</span> <span class="nav-text">强类型和弱类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.</span> <span class="nav-text">静态类型和动态类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flow%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%99%A8%E6%A6%82%E8%BF%B0%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">Flow类型检查器概述和使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="nav-number">3.1.</span> <span class="nav-text">快速上手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4%E6%B3%A8%E8%A7%A3"><span class="nav-number">3.2.</span> <span class="nav-text">移除注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E5%90%88babel%E4%BD%BF%E7%94%A8"><span class="nav-number">3.3.</span> <span class="nav-text">配合babel使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%BC%96%E8%AF%91%E5%99%A8%E6%8F%92%E4%BB%B6"><span class="nav-number">3.4.</span> <span class="nav-text">使用编译器插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.5.</span> <span class="nav-text">类型注解的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript"><span class="nav-number">4.</span> <span class="nav-text">TypeScript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">4.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-1"><span class="nav-number">4.2.</span> <span class="nav-text">快速上手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.3.</span> <span class="nav-text">编译器配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.4.</span> <span class="nav-text">原始数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87%E7%9A%84%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA"><span class="nav-number">4.5.</span> <span class="nav-text">显示中文的错误提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="nav-number">4.6.</span> <span class="nav-text">作用域问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#object%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.7.</span> <span class="nav-text">object类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.8.</span> <span class="nav-text">数组类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%83%E7%A5%96%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.9.</span> <span class="nav-text">元祖类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.10.</span> <span class="nav-text">枚举类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.11.</span> <span class="nav-text">函数类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="nav-number">4.11.1.</span> <span class="nav-text">类型注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%E5%92%8C%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="nav-number">4.11.2.</span> <span class="nav-text">可选参数和默认参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0"><span class="nav-number">4.11.3.</span> <span class="nav-text">剩余参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.12.</span> <span class="nav-text">任意类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD"><span class="nav-number">4.13.</span> <span class="nav-text">隐式类型推断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3-1"><span class="nav-number">4.14.</span> <span class="nav-text">类型注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.15.</span> <span class="nav-text">接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-number">4.16.</span> <span class="nav-text">类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">5.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dongoog"
      src="/images/avatar1.gif">
  <p class="site-author-name" itemprop="name">Dongoog</p>
  <div class="site-description" itemprop="description">这个人很懒，什么也没说.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fongzhizhi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fongzhizhi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020/8 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dongoog</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'IMuRMK0DnpPsKX9v0voX4DEp-gzGzoHsz',
      appKey     : '09kOINEna5kxsB8EFJjXjTGa',
      placeholder: "来都来了...",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


  
  
  
  
    <script async src="/js/cursor/fireworks.js"></script>
  




    <script src="/js/cursor/activate-power-mode.min.js"></script>
    <script>
      POWERMODE.colorful = true;
      POWERMODE.shake = false;
      document.body.addEventListener('input', POWERMODE);
    </script>

  

</body>
</html>
