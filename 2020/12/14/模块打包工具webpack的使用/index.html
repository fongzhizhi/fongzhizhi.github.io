<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fongzhizhi.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":"ture","mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="模块化开发的趋势越来越明显，特别是在大型前端项目中，模块化的开发让我们更好地组织和更灵活地使用代码，在Node端使用的是CommonJS规范的模块化，在浏览器端则是使用ES Modules模块规范。由于ES Modules是ES6才提出的，目前仅有少数版本的浏览器实现了模块化，如果我们使用模块化进行开发，就需要考虑浏览器兼容问题。另外，模块化的代码虽然在开发阶段对开发友好，但过多的模块并不利于浏览">
<meta property="og:type" content="article">
<meta property="og:title" content="模块打包工具webpack的使用">
<meta property="og:url" content="https://fongzhizhi.github.io/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="风之之的Blog">
<meta property="og:description" content="模块化开发的趋势越来越明显，特别是在大型前端项目中，模块化的开发让我们更好地组织和更灵活地使用代码，在Node端使用的是CommonJS规范的模块化，在浏览器端则是使用ES Modules模块规范。由于ES Modules是ES6才提出的，目前仅有少数版本的浏览器实现了模块化，如果我们使用模块化进行开发，就需要考虑浏览器兼容问题。另外，模块化的代码虽然在开发阶段对开发友好，但过多的模块并不利于浏览">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fongzhizhi.github.io/images/webpack.png">
<meta property="og:image" content="https://fongzhizhi.github.io/images/image-20201206115134295.png">
<meta property="og:image" content="https://fongzhizhi.github.io/images/image-20201206121626942.png">
<meta property="article:published_time" content="2020-12-14T15:30:00.000Z">
<meta property="article:modified_time" content="2020-12-14T15:35:47.183Z">
<meta property="article:author" content="Dongoog">
<meta property="article:tag" content="webpack">
<meta property="article:tag" content="模块打包">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fongzhizhi.github.io/images/webpack.png">

<link rel="canonical" href="https://fongzhizhi.github.io/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>模块打包工具webpack的使用 | 风之之的Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="风之之的Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">风之之的Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">好想在哪见过你~</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fongzhizhi.github.io/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar1.gif">
      <meta itemprop="name" content="Dongoog">
      <meta itemprop="description" content="这个人很懒，什么也没说.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="风之之的Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          模块打包工具webpack的使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-14 23:30:00 / 修改时间：23:35:47" itemprop="dateCreated datePublished" datetime="2020-12-14T23:30:00+08:00">2020-12-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/webpack/" itemprop="url" rel="index"><span itemprop="name">webpack</span></a>
                </span>
            </span>

          
            <span id="/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-meta-item leancloud_visitors" data-flag-title="模块打包工具webpack的使用" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>21k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>19 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>模块化开发的趋势越来越明显，特别是在大型前端项目中，模块化的开发让我们更好地组织和更灵活地使用代码，在Node端使用的是CommonJS规范的模块化，在浏览器端则是使用ES Modules模块规范。由于ES Modules是ES6才提出的，目前仅有少数版本的浏览器实现了模块化，如果我们使用模块化进行开发，就需要考虑浏览器兼容问题。另外，模块化的代码虽然在开发阶段对开发友好，但过多的模块并不利于浏览器的频繁加载调用。因此，<strong>为了解决模块化开发中的兼容和代码组织问题，我们一般使用模块打包工具来为我们实现模块代码打包为生产代码</strong>。</p>
<p>目前主流的模块打包工具有：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/">webpack</a>：打包所有的样式表资源。</li>
<li><a target="_blank" rel="noopener" href="https://parceljs.org/">parcel</a>：极速零配置Web应用打包工具</li>
<li><a target="_blank" rel="noopener" href="http://rollupjs.org/guide/zh/">rollup</a>。</li>
</ul>
<p>本文主要就<code>webpack</code>的使用进行展开说明。</p>
<p>实际上，模块打包工具除了解决上面所说的模块规范兼容问题，还能优化组织其他资源的使用，**不仅限于<code>js</code>**，就webpack而言，理论上，我们应当把所有的资源文件都当成独立的模块去加载，去使用，而不仅仅是处理js模块代码。</p>
<p><img data-src="/images/webpack.png"></p>
<a id="more"></a>

<h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><blockquote>
<p>本质上，<em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)<em>。当 webpack 处理应用程序时，它会递归地构建一个</em>依赖关系图(dependency graph)*，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 *bundle</em>。</p>
</blockquote>
<p>从 webpack v4.0.0 开始，可以不用引入一个配置文件。然而，webpack 仍然还是<a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration">高度可配置的</a>。在开始前你需要先理解四个<strong>核心概念</strong>：</p>
<ul>
<li>入口(entry)</li>
<li>输出(output)</li>
<li>loader</li>
<li>插件(plugins)</li>
</ul>
<h3 id="无配置（默认配置）打包"><a href="#无配置（默认配置）打包" class="headerlink" title="无配置（默认配置）打包"></a>无配置（默认配置）打包</h3><p>为了方便测试我们先创建一个一些基本的文件进行测试：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- dist/index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&#x27;utf-8&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&#x27;X-UA-Compatible&#x27;</span> <span class="attr">content</span>=<span class="string">&#x27;IE=edge&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Webpack Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&#x27;viewport&#x27;</span> <span class="attr">content</span>=<span class="string">&#x27;width=device-width, initial-scale=1&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;./main.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/header.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (num, text, cls) =&gt; &#123;</span><br><span class="line">    num = <span class="built_in">Math</span>.max(<span class="number">1</span>, <span class="built_in">Math</span>.min(num, <span class="number">6</span>));</span><br><span class="line">    <span class="keyword">const</span> header = <span class="built_in">document</span>.createElement(<span class="string">`h<span class="subst">$&#123;num&#125;</span>`</span>);</span><br><span class="line">    header.textContent = text || <span class="string">`h<span class="subst">$&#123;num&#125;</span>`</span>;</span><br><span class="line">    cls &amp;&amp; header.classList.add(cls);</span><br><span class="line">    <span class="keyword">return</span> header;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scr/index.js</span></span><br><span class="line"><span class="keyword">import</span> createHeader <span class="keyword">from</span> <span class="string">&#x27;./header&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> h2 = createHeader(<span class="number">2</span>, <span class="string">&#x27;hello webpack!&#x27;</span>, <span class="string">&#x27;heading&#x27;</span>);</span><br><span class="line"><span class="built_in">document</span>.body.append(h2);</span><br></pre></td></tr></table></figure>

<p>写好了测试文件，我们安装webpack即可使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line"></span><br><span class="line">npm install webpack webpack-cli --dev</span><br></pre></td></tr></table></figure>

<p>在4.0以上的版本我们可以不使用配置文件直接运行打包指令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn webpack</span><br></pre></td></tr></table></figure>

<p>然后在<code>dist</code>目录就会出现一个<code>main.js</code>，这个js就是打包后的js代码，打开<code>index.html</code>文件就能看到执行的效果。</p>
<blockquote>
<p>可以发现，默认配置的打包入口为<code>scr/index.js</code>，出口为<code>dist/mian.js</code>文件。</p>
</blockquote>
<h3 id="使用配置文件-基本的四个核心配置"><a href="#使用配置文件-基本的四个核心配置" class="headerlink" title="使用配置文件 - 基本的四个核心配置"></a>使用配置文件 - 基本的四个核心配置</h3><p>虽然我们可以使用默认配置直接打包，但通常我们都会根据自己的需求去修改配置文件<code>webpack.config.js</code>。</p>
<p>（当然你也可以声明为别的文件名，然后用<code>--config **.js</code>的打包参数来指定打包文件名）</p>
<h4 id="入口entry"><a href="#入口entry" class="headerlink" title="入口entry"></a>入口<code>entry</code></h4><p>上面说过，webpack的打包是递归地构建模块依赖图的过程，而入口的配置，就是指定webpack应该使用哪个或哪些模块作为<strong>递归的入口模块</strong>。</p>
<p>比如我们以<code>src</code>目录下的<code>main.js</code>作为打包入口文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/main.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者使用多入口文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">         main: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">        header: <span class="string">&#x27;./src/header/index.js&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>更多使用细节请参考<a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/entry-points/">https://www.webpackjs.com/concepts/entry-points/</a>。</p>
</blockquote>
<h4 id="出口output"><a href="#出口output" class="headerlink" title="出口output"></a>出口<code>output</code></h4><p>出口即递归构建的最终结果，一个入口对应一个出口文件，一般用于指定打包的路径和文件名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;main.bundle.js&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当通过多个入口起点(entry point)、代码拆分(code splitting)或各种插件(plugin)创建多个 bundle，应该使用以下一种替换方式，来赋予每个 bundle 一个唯一的名称……</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用入口名称</span></span><br><span class="line">filename: <span class="string">&quot;[name].bundle.js&quot;</span></span><br><span class="line"><span class="comment">// 使用chunk id</span></span><br><span class="line">filename: <span class="string">&quot;[id].bundls.js&quot;</span></span><br><span class="line"><span class="comment">// 使用唯一hash值</span></span><br><span class="line">filename: <span class="string">&quot;[name].[hash].bundle.js&quot;</span></span><br><span class="line"><span class="comment">// 使用基于chunk内容的hash值</span></span><br><span class="line">filename: <span class="string">&quot;[chunkhash].bundle.js&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>更多使用细节请参考<a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration/output/">https://www.webpackjs.com/configuration/output/</a>。</p>
</blockquote>
<h4 id="加载器loader"><a href="#加载器loader" class="headerlink" title="加载器loader"></a>加载器<code>loader</code></h4><p>文件加载器是webpack构建的核心部分，我们在上文说过，webpack中，不只是js被当做模块来导出，其他资源同样需要会当做模块来打包处理。</p>
<p><em>loader</em> 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将所有类型的文件转换为 webpack 能够处理的有效<a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/modules">模块</a>，然后你就可以利用 webpack 的打包能力，对它们进行处理。</p>
<blockquote>
<p>本质上，webpack loader 将所有类型的文件，转换为应用程序的依赖图（和最终的 bundle）可以直接引用的模块。</p>
</blockquote>
<p>在更高层面，在 webpack 的配置中 <strong>loader</strong> 有两个目标：</p>
<ol>
<li><code>test</code> 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件。</li>
<li><code>use</code> 属性，表示进行转换时，应该使用哪个 loader。</li>
</ol>
<p>比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;my-first-webpack.bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.txt$/</span>, use: <span class="string">&#x27;raw-loader&#x27;</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure>

<p>以上配置中，对一个单独的 module 对象定义了 <code>rules</code> 属性，里面包含两个必须属性：<code>test</code> 和 <code>use</code>。这告诉 webpack 编译器(compiler) 如下信息：</p>
<blockquote>
<p>“嘿，webpack 编译器，当你碰到「在 <code>require()</code>/<code>import</code> 语句中被解析为 ‘.txt’ 的路径」时，在你对它打包之前，先<strong>使用</strong> <code>raw-loader</code> 转换一下。”</p>
</blockquote>
<p>更多loader使用细节请参考：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/loaders/">https://www.webpackjs.com/concepts/loaders/</a>。</p>
<h4 id="插件plugins"><a href="#插件plugins" class="headerlink" title="插件plugins"></a>插件<code>plugins</code></h4><p>loader 被用于转换某些类型的模块，而插件则<strong>可以用于执行范围更广的任务</strong>。插件的范围包括，<strong>从打包优化和压缩，一直到重新定义环境中的变量</strong>。<a target="_blank" rel="noopener" href="https://www.webpackjs.com/api/plugins">插件接口</a>功能极其强大，可以用来处理各种各样的任务。</p>
<p>想要使用一个插件，你只需要 <code>require()</code> 它，然后把它添加到 <code>plugins</code> 数组中。多数插件可以通过选项(option)自定义。你也可以在一个配置文件中因为不同目的而多次使用同一个插件，这时需要通过使用 <code>new</code> 操作符来创建它的一个实例。</p>
<p>下面是一个自动创建html文件的插件：<code>html-webpack-pugin</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.txt$/</span>, use: <span class="string">&#x27;raw-loader&#x27;</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;<span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>&#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure>

<p>点击这里<a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/plugins">了解更多！</a>。</p>
<h4 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h4><p>在实际开发中，我们一般有两种环境的代码：开发环境和生产环境。生产环境的代码应该更接近源码，以便于我们调试和定位错误源，而生产环境一般需要压缩和更优的代码组织方式，webpack提供了一个<code>mode</code>字段进行模式的切换，并内置了一些基本的打包配置,通过选择 <code>development</code> 或 <code>production</code> 之中的一个，来设置 <code>mode</code> 参数，你可以启用相应模式下的 webpack 内置的优化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>或者在命令行中使用指定：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn webpack --mode production</span><br></pre></td></tr></table></figure>

<p>点击这里<a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/mode">了解更多！</a>。</p>
<h2 id="webpack打包运行原理"><a href="#webpack打包运行原理" class="headerlink" title="webpack打包运行原理"></a>webpack打包运行原理</h2><p>为了兼容各浏览器，模块化打包之后其实并未使用<code>es module</code>的语法，而是基本的<code>es</code>语法，“与模块化无关”，只是功能上实现的模块化的效果。</p>
<p>比如我们打包两个模块文件：<code>main.js</code>，<code>header.js</code>，具体代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;header&#125; <span class="keyword">from</span> <span class="string">&#x27;./header&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> h2 = header(<span class="number">2</span>, <span class="string">&#x27;hello webpack!&#x27;</span>, <span class="string">&#x27;heading&#x27;</span>);</span><br><span class="line"><span class="built_in">document</span>.body.append(h2);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// header.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> header = <span class="function">(<span class="params">num, text, cls</span>) =&gt;</span> &#123;</span><br><span class="line">    num = <span class="built_in">Math</span>.max(<span class="number">1</span>, <span class="built_in">Math</span>.min(num, <span class="number">6</span>));</span><br><span class="line">    <span class="keyword">const</span> header = <span class="built_in">document</span>.createElement(<span class="string">`h<span class="subst">$&#123;num&#125;</span>`</span>);</span><br><span class="line">    header.textContent = text || <span class="string">`h<span class="subst">$&#123;num&#125;</span>`</span>;</span><br><span class="line">    cls &amp;&amp; header.classList.add(cls);</span><br><span class="line">    <span class="keyword">return</span> header;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打包后的<code>bundle</code>为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="meta">    &quot;use strict&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> __webpack_modules__ = (&#123;</span><br><span class="line">        <span class="string">&quot;./src/header.js&quot;</span>: (<span class="function">(<span class="params">__unused_webpack_module, __webpack_exports__, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class="line">            __webpack_require__.r(__webpack_exports__);</span><br><span class="line">            __webpack_require__.d(__webpack_exports__, &#123;</span><br><span class="line">                <span class="string">&quot;header&quot;</span>: <span class="function">() =&gt;</span> header</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">var</span> header = <span class="function"><span class="keyword">function</span> <span class="title">header</span>(<span class="params">num, text, cls</span>) </span>&#123;</span><br><span class="line">                num = <span class="built_in">Math</span>.max(<span class="number">1</span>, <span class="built_in">Math</span>.min(num, <span class="number">6</span>));</span><br><span class="line">                <span class="keyword">var</span> header = <span class="built_in">document</span>.createElement(<span class="string">&quot;h&quot;</span>.concat(num));</span><br><span class="line">                header.textContent = text || <span class="string">&quot;h&quot;</span>.concat(num);</span><br><span class="line">                cls &amp;&amp; header.classList.add(cls);</span><br><span class="line">                <span class="keyword">return</span> header;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="string">&quot;./src/main.js&quot;</span>: (<span class="function">(<span class="params">__unused_webpack_module, __webpack_exports__, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class="line">            __webpack_require__.r(__webpack_exports__);</span><br><span class="line">            <span class="keyword">var</span> _header__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="string">&quot;./src/header.js&quot;</span>);</span><br><span class="line">            <span class="keyword">var</span> h2 = (<span class="number">0</span>, _header__WEBPACK_IMPORTED_MODULE_0__.header)(<span class="number">2</span>, <span class="string">&#x27;hello webpack!&#x27;</span>, <span class="string">&#x27;heading&#x27;</span>);</span><br><span class="line">            <span class="built_in">document</span>.body.append(h2);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (__webpack_module_cache__[moduleId]) &#123;</span><br><span class="line">            <span class="keyword">return</span> __webpack_module_cache__[moduleId].exports;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class="line">            <span class="built_in">exports</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        __webpack_modules__[moduleId](<span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">    &#125;(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        __webpack_require__.d = <span class="function">(<span class="params"><span class="built_in">exports</span>, definition</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> definition) &#123;</span><br><span class="line">                <span class="keyword">if</span> (__webpack_require__.o(definition, key) &amp;&amp; !__webpack_require__.o(<span class="built_in">exports</span>, key)) &#123;</span><br><span class="line">                    <span class="built_in">Object</span>.defineProperty(<span class="built_in">exports</span>, key, &#123;</span><br><span class="line">                        enumerable: <span class="literal">true</span>,</span><br><span class="line">                        get: definition[key]</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;)();</span><br><span class="line">    (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        __webpack_require__.o = <span class="function">(<span class="params">obj, prop</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop)</span><br><span class="line">    &#125;)();</span><br><span class="line">    (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        __webpack_require__.r = <span class="function">(<span class="params"><span class="built_in">exports</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Symbol</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="built_in">Symbol</span>.toStringTag) &#123;</span><br><span class="line">                <span class="built_in">Object</span>.defineProperty(<span class="built_in">exports</span>, <span class="built_in">Symbol</span>.toStringTag, &#123;</span><br><span class="line">                    value: <span class="string">&#x27;Module&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">Object</span>.defineProperty(<span class="built_in">exports</span>, <span class="string">&#x27;__esModule&#x27;</span>, &#123;</span><br><span class="line">                value: <span class="literal">true</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;)();</span><br><span class="line">    __webpack_require__(<span class="string">&quot;./src/main.js&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>我们发现，整个代码都使用了立即执行的匿名函数来执行，所有的模块代码也就变成了内部函数，也就无法从<code>window</code>环境下修改和访问模块代码，保证了模块代码的独立性。</p>
<p>在立即执行函数内部，代码可分为两个部分：模块代码的注册，模块代码的引用。</p>
<h3 id="模块代码的注册"><a href="#模块代码的注册" class="headerlink" title="模块代码的注册"></a>模块代码的注册</h3><p>注册模块代码的机制很简单，使用一个对象来保存即可，在上面的打包代码中就是，<code>__webpack_modules__</code>这个变量，模块代码使用了文件相对路径作为模块的<code>key</code>，值为下面格式的接口(函数)：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>_module 指向模块本身的引用变量</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>_moduel_exports 模块的exports对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>_require 用于加载一个模块的逻辑函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">(_module, _moduel_exports, _require) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 1.[模块化标记]define __esModule on exports(在exports对象做__esModule的属性标记)</span></span><br><span class="line">    _require.r(_moduel_exports)</span><br><span class="line">    <span class="comment">// 2.[exports对象的定义：成员属性绑定]</span></span><br><span class="line">    _require.d(_moduel_exports, &#123;</span><br><span class="line">        k1,</span><br><span class="line">        k2,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 3.[模块的定义代码]</span></span><br><span class="line">    <span class="keyword">const</span> k1 = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">const</span> k2 = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样，我们返回模块的exports对象就可以使用到模块内部定义的成员变量了。</p>
</blockquote>
<h3 id="模块代码的引用"><a href="#模块代码的引用" class="headerlink" title="模块代码的引用"></a>模块代码的引用</h3><p>上面说到模块代码的注册，我们可以通过模块的<code>key</code>得到模块的注册函数，这样，传入<code>exports</code>的引用，我们也就拿到了被引用模块的成员变量，具体的逻辑是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 尝试从缓存中读取引用模块</span></span><br><span class="line">    <span class="keyword">if</span>(__webpack_module_cache__[moduleId]) &#123;</span><br><span class="line">        <span class="keyword">return</span> __webpack_module_cache__[moduleId].exports;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建一个新的模块</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class="line">        <span class="built_in">exports</span>: &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据模块id注册模块</span></span><br><span class="line">    __webpack_modules__[moduleId](<span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回模块的exports对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样，我们只需要在调用手动加载一下<strong>模块入口文件</strong>，即可自动触发模块之间的调用链：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__webpack_require__(<span class="string">&quot;./src/main.js&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="各种资源加载器的使用·Loader"><a href="#各种资源加载器的使用·Loader" class="headerlink" title="各种资源加载器的使用·Loader"></a>各种资源加载器的使用·Loader</h2><h3 id="loader的运行机制"><a href="#loader的运行机制" class="headerlink" title="loader的运行机制"></a>loader的运行机制</h3><p>loader是webpack中最基本，也是最核心的打包机制之一，我们知道，webpack默认只提供了js的模块化方案，但是webpack打包希望我们将所有其他资源也看作是模块进行打包，而这里的其他资源，说的就是js资源外的其余资源，webpack相应提供了各种资源的模块化加载loader，我们可以按需进行安装使用。更多细节请参考<a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/">官方说明文档</a>。</p>
<p>loader的作用有很多，但本质上就是将指定匹配的文件输出为loader处理后的数据，可以理解为文件格式（数据）转换工具。</p>
<p>下面我们自定义一个loader，来感受其中的变化过程。</p>
<p>假设我们有这样一个<code>readme.md</code>文件作为主页：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## about me</span></span><br><span class="line">好想在哪见过你~</span><br><span class="line"><span class="section">## link me</span></span><br><span class="line">[<span class="string">@fongzhizhi</span>](<span class="link">https://github.com/fongzhizhi</span>)</span><br></pre></td></tr></table></figure>

<p>我们需要加载<code>.md</code>文件作输入数据，我们可能有这样的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> readme <span class="keyword">from</span> <span class="string">&#x27;./readme.md&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = readme;</span><br></pre></td></tr></table></figure>

<p>直接<code>webpack</code>打包命令会发现执行报错，这是因为<code>md</code>不是js语法，如果直接打包到js中就会产生报错。</p>
<p>所以我们需要使用<code>loader</code>将<code>md</code>文本<strong>转换为js代码段</strong>，这样才能正常插入。</p>
<p>我们定义一个<code>markdown-loader</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.default = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`export default <span class="subst">$&#123; <span class="built_in">JSON</span>.stringify(source) &#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>source</code>接收数据来源，经过一系列转换后得到最终的模块化代码。</p>
</blockquote>
<p>我们看一下最终的界面效果：</p>
<p><img data-src="/images/image-20201206115134295.png"></p>
<p>我们发现，md文本数据正常被页面加载了，现在我们借助第三方模块<code>markdown</code>来讲md语法解析为真正的html代码，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toHTML = <span class="built_in">require</span>(<span class="string">&#x27;markdown&#x27;</span>).parse</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.default = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> html= toHTML(source);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`export default <span class="subst">$&#123; <span class="built_in">JSON</span>.stringify(html) &#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然后再次编译打包查看界面效果：</p>
<p><img data-src="/images/image-20201206121626942.png"></p>
<p>当然，如果我们使用多个loader进行加载，比如使用<code>html-loader</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.md$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">        <span class="string">&#x27;html-loader&#x27;</span>, <span class="comment">// html-loader</span></span><br><span class="line">        <span class="string">&#x27;./webpack-markdown-loader&#x27;</span>, <span class="comment">// 自定义的loader</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么，我们上面写的markdown-loader就可以直接返回处理过的source字符串交给下一个loader：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> marked = <span class="built_in">require</span>(<span class="string">&#x27;marked&#x27;</span>)</span><br><span class="line"><span class="built_in">exports</span>.default = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> html= marked(source);</span><br><span class="line">    <span class="comment">// return `export default $&#123; JSON.stringify(html) &#125;`;</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>关于如何编写一个loader，这里有更多的<a target="_blank" rel="noopener" href="https://www.webpackjs.com/contribute/writing-a-loader/">示例</a>。</p>
<h3 id="文件相关loader"><a href="#文件相关loader" class="headerlink" title="文件相关loader"></a>文件相关loader</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/raw-loader"><code>raw-loader</code></a> 用于加载文件的原始内容（utf-8）。比如用于读取<code>txt</code>纯文本。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/val-loader"><code>val-loader</code></a> 将代码作为模块执行，并将其导出为 JS 代码。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/url-loader"><code>url-loader</code></a> 与 <code>file-loader</code> 类似，但是如果文件大写小于一个设置的值，则返回data URL。</p>
<p>比如某些图片资源，本身很小，我们就可以使用<code>url-loader</code>转换为data url到页面中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.([png|jpg|svg|svg|webp]$)/</span>,</span><br><span class="line">    use: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> google <span class="keyword">from</span> <span class="string">&#x27;../public/images/google.webp&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">img.src = google</span><br><span class="line"><span class="built_in">document</span>.body.append(img)</span><br></pre></td></tr></table></figure>

<p>然后在bundle.js中就可以看到图片被解析为了<code>data url</code>格式，并作为模块导入。</p>
<p>当然，如果图片太大，不应该解析为base url，这样会让bundle文件提及变大，所以可以增加<code>limit</code>选项来控制文件的最大转换值，此外，如果转换失败，我们还需要指定<code>fallcall</code>的失败后的<code>loader</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.(png|jpg|gif|webp)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            limit: <span class="number">5</span> * <span class="number">1024</span>, <span class="comment">// 5k,</span></span><br><span class="line">            fallback: <span class="built_in">require</span>.resolve(<span class="string">&#x27;file-loader&#x27;</span>), <span class="comment">// 转换失败或超过limit，则使用file-loader进行加载</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/file-loader"><code>file-loader</code></a> 将文件保存至输出文件夹中并返回（相对）URL。</p>
<p>file-loader是普通引用资源的加载器，首先file-loader会将require的数据转换为<code>url</code>并输出文件数据到输出目录，本质上就是一次文件的拷贝。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.(png|jpg|gif|svg)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            name: <span class="string">&#x27;[contenthash].[ext]&#x27;</span>,</span><br><span class="line">            outputPath: <span class="string">&#x27;images&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/ref-loader"><code>ref-loader</code></a> 用于手动建立文件之间的依赖关系</p>
</li>
</ul>
<h3 id="JSON相关loader"><a href="#JSON相关loader" class="headerlink" title="JSON相关loader"></a>JSON相关loader</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/json5-loader"><code>json5-loader</code></a> 加载并转换 <a target="_blank" rel="noopener" href="https://json5.org/">JSON 5</a> 文件</p>
<p><code>webpack.config</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.(json|json5)$/</span>,</span><br><span class="line">    loader: <span class="string">&#x27;json5-loader&#x27;</span>,</span><br><span class="line">    type: <span class="string">&#x27;javascript/auto&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>userInfo.json</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Jinx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">24</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>entry.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> userInfo <span class="keyword">from</span> <span class="string">&#x27;../public/userInfo.json&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = <span class="string">`Hello, I&#x27;m <span class="subst">$&#123;userInfo.name&#125;</span>, I&#x27;m <span class="subst">$&#123;userInfo.age&#125;</span> years old.`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/awnist/cson-loader"><code>cson-loader</code></a> 加载并转换 <a target="_blank" rel="noopener" href="https://github.com/bevry/cson#what-is-cson">CSON</a> 文件</p>
</li>
</ul>
<h3 id="语法转换Loader"><a href="#语法转换Loader" class="headerlink" title="语法转换Loader"></a>语法转换Loader</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/sairion/buble-loader"><code>buble-loader</code></a> 使用 <a target="_blank" rel="noopener" href="https://buble.surge.sh/guide/">Bublé</a> 加载 ES2015+ 代码并将其转换为 ES5</li>
<li><a target="_blank" rel="noopener" href="https://github.com/jupl/traceur-loader"><code>traceur-loader</code></a> 使用 <a target="_blank" rel="noopener" href="https://github.com/google/traceur-compiler#readme">Traceur</a> 加载 ES2015+ 代码并将其转换为 ES5</li>
<li><a target="_blank" rel="noopener" href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a> 像加载 JavaScript 一样加载 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/">TypeScript</a> 2.0+</li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/coffee-loader"><code>coffee-loader</code></a> 像加载 JavaScript 一样加载 <a target="_blank" rel="noopener" href="http://coffeescript.org/">CoffeeScript</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fengari-lua/fengari-loader/"><code>fengari-loader</code></a> 使用 <a target="_blank" rel="noopener" href="https://fengari.io/">fengari</a> 加载 Lua 代码</li>
<li><a target="_blank" rel="noopener" href="https://github.com/elm-community/elm-webpack-loader"><code>elm-webpack-loader</code></a> 像加载 JavaScript 一样加载 <a target="_blank" rel="noopener" href="https://elm-lang.org/">Elm</a></li>
</ul>
<p>这里我们学习使用<code>babel-loader</code>和<code>ts-loader</code>：</p>
<h4 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h4><p>老生常谈的东西了，安装必要的模块：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-loader @babel/core @babel/preset-env --dev</span><br></pre></td></tr></table></figure>

<p><code>webpack.config</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            prtesets: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ts-loader"><a href="#ts-loader" class="headerlink" title="ts-loader"></a>ts-loader</h4><p>如果你的项目使用了<code>ts</code>作为开发语言，那么打包时就需要解析为<code>js</code>语言。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ts-loader typescript --dev</span><br></pre></td></tr></table></figure>

<p><code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devtool: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">    mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    entry: &#123;</span><br><span class="line">        main: <span class="string">&#x27;./src/main.ts&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        <span class="comment">// Add `.ts` and `.tsx` as a resolvable extension.</span></span><br><span class="line">        extensions: [<span class="string">&quot;.ts&quot;</span>, <span class="string">&quot;.tsx&quot;</span>, <span class="string">&quot;.js&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(ts|tsx)$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>src/main.ts</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Person &#125; <span class="keyword">from</span> <span class="string">&quot;./interface&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">p: Person</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello, I&#x27;m <span class="subst">$&#123;p.name&#125;</span>, I&#x27;m <span class="subst">$&#123;p.age&#125;</span> years old.`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> jinx: Person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;Jinx&#x27;</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = sayHi(jinx);</span><br></pre></td></tr></table></figure>

<p><code>src/interface.ts</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了让ts解析能正常工作，我们还需要在项目根目录新增<code>tsconfig.json</code>文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es6&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;noImplicitAny&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;removeComments&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;sourceMap&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;include&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;src/**/*&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;node_modules&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更多配置请参考：<a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/handbook/compiler-options.html">编译选项</a></p>
<h3 id="模板Loader"><a href="#模板Loader" class="headerlink" title="模板Loader"></a>模板Loader</h3><ul>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/html-loader"><code>html-loader</code></a> 将 HTML 导出为字符串，需要传入静态资源的引用路径</li>
<li><a target="_blank" rel="noopener" href="https://github.com/pugjs/pug-loader"><code>pug-loader</code></a> 加载 Pug 和 Jade 模板并返回一个函数</li>
<li><a target="_blank" rel="noopener" href="https://github.com/peerigon/markdown-loader"><code>markdown-loader</code></a> 将 Markdown 编译为 HTML</li>
<li><a target="_blank" rel="noopener" href="https://github.com/javiercf/react-markdown-loader"><code>react-markdown-loader</code></a> 使用 markdown-parse 解析器将 Markdown 编译为 React 组件</li>
<li><a target="_blank" rel="noopener" href="https://github.com/posthtml/posthtml-loader"><code>posthtml-loader</code></a> 使用 <a target="_blank" rel="noopener" href="https://github.com/posthtml/posthtml">PostHTML</a> 加载并转换 HTML 文件</li>
<li><a target="_blank" rel="noopener" href="https://github.com/pcardune/handlebars-loader"><code>handlebars-loader</code></a> 将 Handlebars 文件编译为 HTML</li>
<li><a target="_blank" rel="noopener" href="https://github.com/asnowwolf/markup-inline-loader"><code>markup-inline-loader</code></a> 将 SVG/MathML 文件内嵌到 HTML 中。在将图标字体或 CSS 动画应用于 SVG 时，此功能非常实用。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/zimmo-be/twig-loader"><code>twig-loader</code></a> 编译 Twig 模板并返回一个函数</li>
<li><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/remark-loader"><code>remark-loader</code></a> 通过 <code>remark</code> 加载 markdown，且支持解析内容中的图片</li>
</ul>
<p>主要为html模板和markdown模板。</p>
<h4 id="html-loader"><a href="#html-loader" class="headerlink" title="html-loader"></a>html-loader</h4><p><code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;html-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            esModule: <span class="literal">true</span>,</span><br><span class="line">            preprocessor: <span class="function">(<span class="params">content, loaderContext</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Handlebars.compile(content)(&#123;</span><br><span class="line">                    firstname: <span class="string">&#x27;Jinx&#x27;</span>,</span><br><span class="line">                    lastname: <span class="string">&#x27;Chiang&#x27;</span>,</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>temp.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; firstname &#125;&#125; &#123;&#123; lastname &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../public/images/google.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;jinx&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>main.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> temp <span class="keyword">from</span> <span class="string">&#x27;./temp.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = temp</span><br></pre></td></tr></table></figure>

<p>注意，ts默认是不支持导如html文件的，所以我们需要使用模块声明语句进行声明：</p>
<p><code>html.d.ts</code>：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> &quot;*.html&quot; &#123;</span><br><span class="line">    <span class="keyword">const</span> value: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果未生效记得把改文件手动加入<code>tsconfig.json</code>配置文件<code>include</code>字段下。</p>
</blockquote>
<p>html-loader还有很多别的用法，需要配合不同的配置，这里就不再逐一介绍。</p>
<h3 id="样式Loader"><a href="#样式Loader" class="headerlink" title="样式Loader"></a>样式Loader</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/style-loader"><code>style-loader</code></a> 将模块的导出作为样式添加到 DOM 中</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/css-loader"><code>css-loader</code></a> 解析 CSS 文件后，使用 import 加载，并且返回 CSS 代码</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/less-loader"><code>less-loader</code></a> 加载和转译 LESS 文件</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/sass-loader"><code>sass-loader</code></a> 加载和转译 SASS/SCSS 文件</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/postcss-loader"><code>postcss-loader</code></a> 使用 <a target="_blank" rel="noopener" href="http://postcss.org/">PostCSS</a> 加载和转译 CSS/SSS 文件</li>
<li><code>stylus-loader</code> 加载和转译 Stylus 文件</li>
</ul>
<h4 id="style-loader-amp-css-loader"><a href="#style-loader-amp-css-loader" class="headerlink" title="style-loader &amp; css-loader"></a>style-loader &amp; css-loader</h4><p>如果css文件很少，或者说希望像模块一样导入css文件，我们就可以把css文件转化为style节点，添加到对应的页面中去。通常情况下，style-loader和css-loader是联合使用的。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i style-loader css-loader --dev</span><br></pre></td></tr></table></figure>

<p><code>main.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#17dede</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e46a15</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#1c6ac0</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>main.ts</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> temp <span class="keyword">from</span> <span class="string">&#x27;./temp.html&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style/main.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = temp</span><br></pre></td></tr></table></figure>

<p>用法1：生成style节点：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用法2：生成link节点：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                injectType: <span class="string">&#x27;linkTag&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h4><p>如果项目中使用了less语法进行样式编译，我们再使用less-loader作为一级loader，把处理过的less文件交给css-loader和style-loader即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">            test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            use: [&#123;</span><br><span class="line">                loader: <span class="string">&quot;style-loader&quot;</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">&quot;less-loader&quot;</span>, <span class="attr">options</span>: &#123;</span><br><span class="line">                    strictMath: <span class="literal">true</span>,</span><br><span class="line">                    noIeCompat: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Linting和测试Loader"><a href="#Linting和测试Loader" class="headerlink" title="Linting和测试Loader"></a>Linting和测试Loader</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/mocha-loader"><code>mocha-loader</code></a> 使用 <a target="_blank" rel="noopener" href="https://mochajs.org/">mocha</a> 测试（浏览器/NodeJS）</li>
<li><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/eslint-loader"><code>eslint-loader</code></a> PreLoader，使用 <a target="_blank" rel="noopener" href="https://eslint.org/">ESLint</a> 清理代码</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/jshint-loader"><code>jshint-loader</code></a> PreLoader，使用 <a target="_blank" rel="noopener" href="http://jshint.com/about/">JSHint</a> 清理代码</li>
<li><code>jscs-loader</code> PreLoader，使用 <a target="_blank" rel="noopener" href="http://jscs.info/">JSCS</a> 检查代码样式</li>
<li><a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/coverjs-loader"><code>coverjs-loader</code></a> PreLoader，使用 <a target="_blank" rel="noopener" href="https://github.com/arian/CoverJS">CoverJS</a> 确定测试覆盖率</li>
</ul>
<h4 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint eslint-loader --dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: [<span class="string">&#x27;babel-loader&#x27;</span>, <span class="string">&#x27;eslint-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="框架Loader"><a href="#框架Loader" class="headerlink" title="框架Loader"></a>框架Loader</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-loader"><code>vue-loader</code></a> 加载并编译 <a target="_blank" rel="noopener" href="https://vuejs.org/v2/guide/components.html">Vue 组件</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/polymer-webpack-loader"><code>polymer-loader</code></a> 使用支持配置的预处理程序处理 HTML 和 CSS，并使用 <code>require()</code> 加载模块的方式处理 Web Components</li>
<li><a target="_blank" rel="noopener" href="https://github.com/TheLarkInn/angular2-template-loader"><code>angular2-template-loader</code></a> 加载并编译 <a target="_blank" rel="noopener" href="https://angular.io/">Angular</a> 组件</li>
</ul>
<h2 id="常用插件的使用·Plugins"><a href="#常用插件的使用·Plugins" class="headerlink" title="常用插件的使用·Plugins"></a>常用插件的使用·Plugins</h2><blockquote>
<p>webpack 有着丰富的插件接口(rich plugin interface)。webpack 自身的多数功能都使用这个插件接口。这个插件接口使 webpack 变得<strong>极其灵活</strong>。</p>
</blockquote>
<p>除了<code>loader</code>，webpack另一个核心特性就是Plugins插件的使用，各种loader让我们能将引用资源模块化，而plugins可以让满足我们模块化开发之外的需求，比如动态创建html文件、清除文件、压缩代码等等。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>webpack插件是一个实现了<code>apply</code>方法的对象。<code>appply</code>方法会被webpack coimpiler调用，并且在整个编译生命周期都可以访问compiler对象。</p>
<p>比如：<strong>ConsoleLogOnBuildWebpackPlugin.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pluginName = <span class="string">&#x27;ConsoleLogoOnBuildWebpackPlugin&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConsoleLogOnBuildWebpackPlugin</span> </span>&#123;</span><br><span class="line">    apply(compiler) &#123;</span><br><span class="line">        conpiler.hooks.run.tap(pluginName, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;webpack 构建开始!&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = ConsoleLogOnBuildWebpackPlugin</span><br></pre></td></tr></table></figure>

<p>由于插件可以携带参数，所以在webpack配置中，必须向<code>plugins</code>属性传入一个<code>new</code>实例。</p>
<p>一般有两种用法，</p>
<p><strong>使用配置文件使用插件</strong></p>
<p><code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> ConsoleLogOnBuildWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用node api的方式使用插件</strong></p>
<p><code>some-node-script.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>) <span class="comment">// 访问 webpack 运行时(runtime)</span></span><br><span class="line"><span class="keyword">const</span> configuration = <span class="built_in">require</span>(<span class="string">&#x27;./webpack..config.js&#x27;</span>) <span class="comment">// 配置文件</span></span><br><span class="line"><span class="keyword">const</span> ConsoleLogOnBuildWebpackPlugin = reqiure(<span class="string">&#x27;./src/ConsoleLogOnBuildWebpackPlugin.js&#x27;</span>) <span class="comment">// 要使用的插件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> compiler = webpack(configuration) <span class="comment">// 获取compiler实例</span></span><br><span class="line"><span class="keyword">new</span> ConsoleLogOnBuildWebpackPlugin().apply(compiler); <span class="comment">// 插件实例化并绑定compiler</span></span><br><span class="line">compiler.run(<span class="function">(<span class="params">err, stats</span>) =&gt;</span> &#123; <span class="comment">// 执行</span></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>compiler是webpack的支柱引擎 ，它通过 <a target="_blank" rel="noopener" href="https://www.webpackjs.com/api/cli">CLI</a> 或 <a target="_blank" rel="noopener" href="https://www.webpackjs.com/api/node">Node API</a> 传递的所有选项，创建出一个 compilation 实例。它扩展(extend)自 <code>Tapable</code> 类，以便注册和调用插件。大多数面向用户的插件首，会先在 <code>Compiler</code> 上注册。</p>
</blockquote>
<p>从上面的使用案例，我们可以发现，webpack的插件机制就是简单的<code>钩子机制</code>，通过webpack的compiler钩子来选择性地在各个编译阶段执行你需要的插件功能。</p>
<h3 id="自动生成html：html-webpack-plugin"><a href="#自动生成html：html-webpack-plugin" class="headerlink" title="自动生成html：html-webpack-plugin"></a>自动生成html：html-webpack-plugin</h3><p><a target="_blank" rel="noopener" href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>简化了HTML文件的创建，以便为你的webpack包提供服务。这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用。</p>
<p>使用尤其简单，你还可以在模板html文件的基础上进行扩展：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">        template: <span class="string">&#x27;./public/template/index.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="自动清除目录文件：clean-webpack-plugin"><a href="#自动清除目录文件：clean-webpack-plugin" class="headerlink" title="自动清除目录文件：clean-webpack-plugin"></a>自动清除目录文件：clean-webpack-plugin</h3><p>如果你有清除目录的习惯，特别是常常切换打包模式而导致打包目录下文件不同的时候，自动清除构建目录也许会很方便。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i clean-webpack-plugin --dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> cleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> htmlWebpackPlugin(),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="开发一个自定义插件"><a href="#开发一个自定义插件" class="headerlink" title="开发一个自定义插件"></a>开发一个自定义插件</h3><p>插件的使用是根据需求来决定的，webpack提供了跟多插件，也有很多优秀的第三方webpack插件，我们可以按需根据关键字检索。当然，如果某些插件无法满足你的特定需求，你可以自己动手编写一个插件，因为我们已经知道，一个webpack插件运行的基本原理只需要满足：</p>
<ul>
<li>使用<code>compiler</code>对象作为编译时的钩子。</li>
<li>实现一个<code>apply</code>方法。</li>
</ul>
<p>我们尝试开发一个<code>js beautify</code>的插件，</p>
<p><code>public/plugins/js-beautify-plugin</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> beautify =  <span class="built_in">require</span>(<span class="string">&#x27;js-beautify&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * js格式化插件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JsBeautifyPlugin</span> </span>&#123;</span><br><span class="line">    apply(compiler) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;JsBeautifyPlugin starting....&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 挂载到钩子函数</span></span><br><span class="line">        <span class="comment">// emit是文件输出到output目录之前的钩子(tap是同步模式)</span></span><br><span class="line">        compiler.hooks.emit.tap(<span class="string">&#x27;JsBeautifyPlugin&#x27;</span>, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">const</span> name <span class="keyword">in</span> compilation.assets) &#123;</span><br><span class="line">                <span class="comment">// 读取资源文件</span></span><br><span class="line">                <span class="keyword">if</span> (name.endsWith(<span class="string">&#x27;.js&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">let</span> constents = compilation.assets[name].source();</span><br><span class="line">                    <span class="comment">// beautify</span></span><br><span class="line">                    <span class="keyword">const</span> beautifyConstents = beautify(constents, &#123;</span><br><span class="line">                        indent_size: <span class="number">4</span>,</span><br><span class="line">                        space_in_empty_paren: <span class="literal">true</span>,</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="comment">// 覆盖</span></span><br><span class="line">                    compilation.assets[name] = &#123;</span><br><span class="line">                        source: <span class="function">() =&gt;</span> beautifyConstents,</span><br><span class="line">                        size: <span class="function">() =&gt;</span> beautifyConstents.length,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = JsBeautifyPlugin;</span><br></pre></td></tr></table></figure>

<p>配置后执行就可以看到效果了。</p>
<h2 id="wabpack开发体验优化"><a href="#wabpack开发体验优化" class="headerlink" title="wabpack开发体验优化"></a>wabpack开发体验优化</h2><h3 id="自动编译"><a href="#自动编译" class="headerlink" title="自动编译"></a>自动编译</h3><p>自动编译基本就是通过<strong>监听文件变化</strong>来重新打包编译实现。而要开启自动编译功能，只需要开启<code>watch</code>模式即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn webapck --watch</span><br></pre></td></tr></table></figure>

<h3 id="自动更新浏览器-amp-Webpack-Dev-Server"><a href="#自动更新浏览器-amp-Webpack-Dev-Server" class="headerlink" title="自动更新浏览器 &amp; Webpack Dev Server"></a>自动更新浏览器 &amp; Webpack Dev Server</h3><p>我们可以使用类似<code>browserSync</code>这样的工具开启服务器，但如果要实现自动监听还需要另外开启文件的监听，这样就导致了重复了监听任务，所以这里推荐使用webpack官方的<code>webpack-dev-server</code>插件，这样我们在开启<code>watch</code>模式的同时就会自动开启浏览器的自动刷新。</p>
<p>需要注意的是，很多时候安装运行由于版本不匹配导致报错，可以尝试使用下面的版本：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;webpack&quot;</span>: <span class="string">&quot;^5.6.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;webpack-cli&quot;</span>: <span class="string">&quot;^3.3.9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;webpack-dev-server&quot;</span>: <span class="string">&quot;^3.11.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>webpack-dev-server</code>还有一些配置可供选择：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: path.join(__dirnamr, <span class="string">&#x27;public&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更多配置请参考：<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/dev-server/">devServer</a>。</p>
<h3 id="Source-Map"><a href="#Source-Map" class="headerlink" title="Source Map"></a>Source Map</h3><p>由于webpack将项目模块打包编译之后，代码的位置已经发生了变化，如果出现错误，就不能迅速定位到源文件。而source map就是为了解决这一问题：记录了bundle和源代码之间的转换映射关系。</p>
<p>而我们要开启<code>sourceMap</code>的相关配置就需要配置<code>devtool</code>项来根据个人需求来选择。</p>
<h3 id="打包构建选项devtool"><a href="#打包构建选项devtool" class="headerlink" title="打包构建选项devtool"></a>打包构建选项<code>devtool</code></h3><p>配置项请参考：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration/devtool/">https://www.webpackjs.com/configuration/devtool/</a>。</p>
<h3 id="模块热替换（热更新）HMR"><a href="#模块热替换（热更新）HMR" class="headerlink" title="模块热替换（热更新）HMR"></a>模块热替换（热更新）<code>HMR</code></h3><p>模块热替换(hot module replacement 或 HMR)是 webpack 提供的最有用的功能之一。它允许在运行时更新所有类型的模块， 而无需完全刷新。本页面重点介绍其 <strong>实现</strong>，而 <a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/hot-module-replacement">概念</a> 页面提供了更多关于 它的工作原理以及为什么它有用的细节。</p>
<p>具体请参考：<a target="_blank" rel="noopener" href="https://webpack.docschina.org/guides/hot-module-replacement/">模块热替换。</a></p>
<h3 id="webpack打包工作模式"><a href="#webpack打包工作模式" class="headerlink" title="webpack打包工作模式"></a>webpack打包工作模式</h3><p>参考<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/mode/">https://webpack.docschina.org/configuration/mode/</a></p>
<h3 id="webpack的打包优化optimization"><a href="#webpack的打包优化optimization" class="headerlink" title="webpack的打包优化optimization"></a>webpack的打包优化<code>optimization</code></h3><p>参考<a target="_blank" rel="noopener" href="https://webpack.docschina.org/configuration/optimization/#root">https://webpack.docschina.org/configuration/optimization/#root</a>.</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/">webapck官方文档</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.tslang.cn/index.html">ts</a></p>
</li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div>谢谢你请我吃糖!</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Dongoog 微信">
        <p>微信</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Dongoog 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Dongoog
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://fongzhizhi.github.io/2020/12/14/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7webpack%E7%9A%84%E4%BD%BF%E7%94%A8/" title="模块打包工具webpack的使用">https://fongzhizhi.github.io/2020/12/14/模块打包工具webpack的使用/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/webpack/" rel="tag"><i class="fa fa-tag"></i> webpack</a>
              <a href="/tags/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85/" rel="tag"><i class="fa fa-tag"></i> 模块打包</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/12/10/%E3%80%8A%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1%E3%80%8B/" rel="prev" title="《小狗钱钱》- 读书笔记">
      <i class="fa fa-chevron-left"></i> 《小狗钱钱》- 读书笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/12/16/%E7%BA%AF%E7%B2%B9%E7%9A%84es%20moudle%E6%89%93%E5%8C%85%E5%99%A8Rollup/" rel="next" title="纯粹的es moudle打包器Rollup">
      纯粹的es moudle打包器Rollup <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="nav-number">1.</span> <span class="nav-text">快速上手</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E9%85%8D%E7%BD%AE%EF%BC%88%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%EF%BC%89%E6%89%93%E5%8C%85"><span class="nav-number">1.1.</span> <span class="nav-text">无配置（默认配置）打包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.</span> <span class="nav-text">使用配置文件 - 基本的四个核心配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A5%E5%8F%A3entry"><span class="nav-number">1.2.1.</span> <span class="nav-text">入口entry</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BA%E5%8F%A3output"><span class="nav-number">1.2.2.</span> <span class="nav-text">出口output</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E5%99%A8loader"><span class="nav-number">1.2.3.</span> <span class="nav-text">加载器loader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6plugins"><span class="nav-number">1.2.4.</span> <span class="nav-text">插件plugins</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.5.</span> <span class="nav-text">模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%89%93%E5%8C%85%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">webpack打包运行原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E4%BB%A3%E7%A0%81%E7%9A%84%E6%B3%A8%E5%86%8C"><span class="nav-number">2.1.</span> <span class="nav-text">模块代码的注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E4%BB%A3%E7%A0%81%E7%9A%84%E5%BC%95%E7%94%A8"><span class="nav-number">2.2.</span> <span class="nav-text">模块代码的引用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%84%E7%A7%8D%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%C2%B7Loader"><span class="nav-number">3.</span> <span class="nav-text">各种资源加载器的使用·Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#loader%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="nav-number">3.1.</span> <span class="nav-text">loader的运行机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3loader"><span class="nav-number">3.2.</span> <span class="nav-text">文件相关loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSON%E7%9B%B8%E5%85%B3loader"><span class="nav-number">3.3.</span> <span class="nav-text">JSON相关loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E8%BD%AC%E6%8D%A2Loader"><span class="nav-number">3.4.</span> <span class="nav-text">语法转换Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#babel-loader"><span class="nav-number">3.4.1.</span> <span class="nav-text">babel-loader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ts-loader"><span class="nav-number">3.4.2.</span> <span class="nav-text">ts-loader</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BFLoader"><span class="nav-number">3.5.</span> <span class="nav-text">模板Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#html-loader"><span class="nav-number">3.5.1.</span> <span class="nav-text">html-loader</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8FLoader"><span class="nav-number">3.6.</span> <span class="nav-text">样式Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#style-loader-amp-css-loader"><span class="nav-number">3.6.1.</span> <span class="nav-text">style-loader &amp; css-loader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#less-loader"><span class="nav-number">3.6.2.</span> <span class="nav-text">less-loader</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linting%E5%92%8C%E6%B5%8B%E8%AF%95Loader"><span class="nav-number">3.7.</span> <span class="nav-text">Linting和测试Loader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#eslint"><span class="nav-number">3.7.1.</span> <span class="nav-text">eslint</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6Loader"><span class="nav-number">3.8.</span> <span class="nav-text">框架Loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%C2%B7Plugins"><span class="nav-number">4.</span> <span class="nav-text">常用插件的使用·Plugins</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%B3%95"><span class="nav-number">4.1.</span> <span class="nav-text">用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90html%EF%BC%9Ahtml-webpack-plugin"><span class="nav-number">4.2.</span> <span class="nav-text">自动生成html：html-webpack-plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%B8%85%E9%99%A4%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%EF%BC%9Aclean-webpack-plugin"><span class="nav-number">4.3.</span> <span class="nav-text">自动清除目录文件：clean-webpack-plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6"><span class="nav-number">4.4.</span> <span class="nav-text">开发一个自定义插件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wabpack%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96"><span class="nav-number">5.</span> <span class="nav-text">wabpack开发体验优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91"><span class="nav-number">5.1.</span> <span class="nav-text">自动编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E6%B5%8F%E8%A7%88%E5%99%A8-amp-Webpack-Dev-Server"><span class="nav-number">5.2.</span> <span class="nav-text">自动更新浏览器 &amp; Webpack Dev Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Source-Map"><span class="nav-number">5.3.</span> <span class="nav-text">Source Map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E6%9E%84%E5%BB%BA%E9%80%89%E9%A1%B9devtool"><span class="nav-number">5.4.</span> <span class="nav-text">打包构建选项devtool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%83%AD%E6%9B%BF%E6%8D%A2%EF%BC%88%E7%83%AD%E6%9B%B4%E6%96%B0%EF%BC%89HMR"><span class="nav-number">5.5.</span> <span class="nav-text">模块热替换（热更新）HMR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack%E6%89%93%E5%8C%85%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.6.</span> <span class="nav-text">webpack打包工作模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack%E7%9A%84%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96optimization"><span class="nav-number">5.7.</span> <span class="nav-text">webpack的打包优化optimization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">6.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dongoog"
      src="/images/avatar1.gif">
  <p class="site-author-name" itemprop="name">Dongoog</p>
  <div class="site-description" itemprop="description">这个人很懒，什么也没说.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fongzhizhi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fongzhizhi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020/8 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dongoog</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'IMuRMK0DnpPsKX9v0voX4DEp-gzGzoHsz',
      appKey     : '09kOINEna5kxsB8EFJjXjTGa',
      placeholder: "来都来了...",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


  
  
  
  
    <script async src="/js/cursor/fireworks.js"></script>
  




    <script src="/js/cursor/activate-power-mode.min.js"></script>
    <script>
      POWERMODE.colorful = true;
      POWERMODE.shake = false;
      document.body.addEventListener('input', POWERMODE);
    </script>

  

</body>
</html>
